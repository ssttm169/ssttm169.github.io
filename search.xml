<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[专冶各种H5的嵌入垃圾广告!]]></title>
      <url>/2018/05/28/how-to-block-popup-ads-in-browser/</url>
      <content type="html"><![CDATA[<p>公司的H5页面挨嵌入各种各样的广告，有时有，有时没有，这个很烦人，问过许多大咖，有几种说法和几种解决方法</p>
<a id="more"></a>
<p><strong>1.DNS劫持 。</strong></p>
<p>HTML5页面被电信运营商进行DNS劫持植入广告，建议打电话给电信运营商。这招我试过，不管用，他们都在踢皮球，到底是运营商或代理商干的，，还是内部人干，很难追求到源头。</p>
<p><strong>2.HTTP劫持 。</strong> </p>
<p>可能也有这个原因，建议使用HTTPS， HTTPS成本不算高， 一年几百块至几千块的，能有效拦截嵌入广告。 但不彻底， 照样有嵌入广告的情况，具体原因不详。</p>
<p><strong>3.第三方包植入广告。</strong></p>
<p>不排除第三方的包有植入广告的代码，但这个不好找，一个项目的npm包，可能1000多个~~..</p>
<p>难道没有更好的办法了吗? 有~~这个是别人那里扒过来的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 反运营商劫持 S --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">    html &#123;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">        display:none;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="keyword">if</span>( self == top ) &#123;</span></div><div class="line"><span class="javascript">        <span class="built_in">document</span>.documentElement.style.display = <span class="string">'block'</span> ;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">    &#125; <span class="keyword">else</span> &#123;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">        top.location = self.location ;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 反运营商劫持 E --&gt;</span></div></pre></td></tr></table></figure>
<p>但实际运用的过程，不起作用，可能是奸商改了规则~~。</p>
<p>经过反复研究，那些嵌入的代码，的确规则时常变化的，~~但有一样东西是不变的，就是iframe，每段嵌入代码都会iframe</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">...</div><div class="line"><span class="comment">&lt;!-- 嵌入的广告代码 开始  --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"xxx_id"</span>&gt;</span></div><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"xxx"</span> <span class="attr">src</span>=<span class="string">"xx.com"</span><span class="attr">...</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 嵌入的广告代码 结束  --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>所以我的代码是这样写的。</p>
<p>css代码</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 抢先 隐藏 iframe */</span></div><div class="line"><span class="selector-tag">body</span> <span class="selector-tag">iframe</span> &#123;<span class="attribute">display</span>: none;&#125;</div></pre></td></tr></table></figure>
<p>js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> del_times = <span class="number">0</span>, deTimer = <span class="literal">null</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">adGo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'iframe'</span>)[<span class="number">0</span>];</div><div class="line">	<span class="keyword">if</span>(iframe)&#123;</div><div class="line">		<span class="built_in">console</span>.log(iframe)</div><div class="line">		<span class="keyword">var</span> bodyNode = &#123;<span class="attr">tagName</span>:<span class="string">''</span>&#125;, iframeParent, targetNode = iframe.parentNode;</div><div class="line">		<span class="keyword">while</span> (bodyNode.tagName != <span class="string">'BODY'</span>)&#123;</div><div class="line">			bodyNode = targetNode;</div><div class="line">			<span class="keyword">if</span>(bodyNode.tagName != <span class="string">'BODY'</span>)&#123;</div><div class="line">				iframeParent = targetNode;</div><div class="line">				targetNode = targetNode.parentNode;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(iframeParent) <span class="comment">//如果iframe有父类</span></div><div class="line">			bodyNode.removeChild(iframeParent);</div><div class="line">		<span class="keyword">else</span></div><div class="line">			bodyNode.removeChild(iframe);</div><div class="line">	&#125;</div><div class="line">	del_times++;</div><div class="line">	<span class="keyword">if</span> (del_times &gt; <span class="number">10</span>) <span class="built_in">window</span>.clearInterval(deTimer)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//抢先 删除 嵌入广告</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;adGo();&#125;())</div><div class="line"></div><div class="line">deTimer = self.setInterval(adGo, <span class="number">200</span>);</div></pre></td></tr></table></figure>
<p>把代码加到<code>&lt;body&gt;&lt;/body&gt;</code></p>
<p>经过一星期运行，效果棒棒的，妈妈再也不要担心我H5的弹出广告了。<br>github源代码在这里</p>
<div class="github-widget" data-repo="ssttm169/remove-h5-ads"></div>]]></content>
      
        <categories>
            
            <category> 前端 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
            <tag> html </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[2017年总结]]></title>
      <url>/2018/01/12/what-I-learnt-in-2017/</url>
      <content type="html"><![CDATA[<p>光阴似箭， 感觉2017年一眨眼就过去了，回家过年又挨家人逼婚了! 曾经鼓鼓的钱包又要变扁了! 同学聚会又是一场攀比聚会!…年复一年， 日复一日，是否感觉就像一次次例行公事，每次都在重复昨天的故事，枯燥乏味。是的，我曾经也有过这样的感觉，不过2017年让我找到了根源，找到了答案。归根结底， 是否有意识地记录自己的成长历程，并及时总结和调整自己对待人生的态度。当每次去回顾自己的成长历程时，就会发现原来自己人生的每一刻都是这么有意义的， 下面分享一下我的具体收获和感悟。~</p>
<a id="more"></a>
<p>2017年是我的成长年, 是这么多年来获收最多的一年，这其中包括 不畏惧困难，有意识地改变自己的言行举止，对待时间的态度的转变，良好的作息和学习习惯， 坚持跑步健身等， 用一个词来形容这一年的收获是 “成熟”。 除了收获之外，也犯了许多低级错误，幸好在这个嗑嗑碰碰的岁月，我逐渐形成了写反思总结的良好习惯，这正是成熟的标志。 </p>
<p><br></p>
<p><strong>关于困难， 让我树立信心</strong></p>
<p>记得在此之前每次遇到困难时，总是持有消极的态度 如”我怎么这么倒霉”, “怎么每次都是我?” , 除了不断地抱怨之外，还认为只要一拖延，困难就会自动消失 ，事实证明困难的确会“消失”。 但这种困难还会继续“复发”, 在以后的特定时间和特定场景还会卷土重来。在《少有人走的路》里边的提到 “要直面困难，才能走往成熟“。只要直面困难，以积极的态度地去解决它，才能 “根治”它,  虽然刚开始时，很痛苦，但只要坚持下去，没有什么困难是解决不了的，困难的路越走越容易,容易的路越走越难。</p>
<p><br></p>
<p>经历过2017年， 我越来越觉得 困难就像一个金矿，一个永远挖掘不完的金矿。 让我回顾一下我所遇到的那些“金矿”。比如“ iphone手机的兼容问题， 微信分享问题，二维码生成问题， 接口调用超时问题”等等，这些问题是我之前没有遇到过的，而且百度也很难到相应的解决方案, 按照以前的性格,  抱怨?拖?这有用吗?没有，除了没有帮助之外，而且还有害，这种负能量逐渐会毁掉自己。 “生活就像强奸 如果不能反抗 就尽情享受吧”， 如果我解决不了这些问题，我本身就是个问题，老板迟早都会把我换掉。 上有老，下有小，还欠了一屁股债， 我有选择吗?没有， 醒醒吧,,, 这个社会就是这么残酷的。…..与其说生活所迫，不如说享受生活， 好好痛哭一场，擦干眼泪，收拾好心情，老老实实面对生活。于是，当我解决了一个“不可能”的困难时，发现这其实没有想像中这么难嘛，当我走出了第一步，就可能会有第二步，所以上面提到的那些难题，逐个逐个挨我解决了，在这个过程中除了建立了自信之外，还养成了许多很好的习惯，比如写工作日志，写博客，阅读等。</p>
<p><br></p>
<p><strong>关于反思，让我走向成熟之路</strong></p>
<p>之前在潜意识中，有许多习惯及言行举止，比如刷微信，抗拒做家务， 沉迷看电影， 爱争论，抱怨等等， 在成长的道路上，给我造许多不便，但我全然不知，却还理直气壮跟别人的说，“这就是我”， 问题不在我的身上，这是人家的问题，与我无关。但这些年来，换了许多工作，身边的朋友换了一波又一波，所碰到的许多问题都有相似之处，让我逐渐思识到问题可能是出现在自己身上。 成甲在他的《好好学习》里边提到“反思”的概念，就是每天即时记录自己的感受和心情，并总结和反思，看看有哪些事情做得不好， 有什么改变的方法，然后及时调整。 成甲老师还建议使用富兰克林的十三美德做为改进的人生准则，当我读完《富兰克林自传》之后，确认 这的确是良性环循的行为准则  执行 》反思 》调整 》再执行。对于这醍醐灌顶的观念，让我相见恨晚，但只要能意识到自己的错误，并把反思赋于行为，走上正确的道路，永远不算晚。</p>
<p><br></p>
<p><strong>关于时间， 一个非常稀缺的资源</strong></p>
<p>如果你到了25岁以后，结了婚，又生了小孩， 那你的时间会过得越来越快。 白天工作八小时，虽然说晚上也要八个小时，但是回到家，既要陪小孩玩，又要教她做作业，基本上没有剩下多少时间，时间就会变得越来越稀缺的一个东西。很不幸，除了很缺钱之外，我还很缺时间， 给我感觉，2017年过得真的太快了， 当我真正想要去做2017年的计划，发现已经过了大半年，现在又要计划2018年的计划了。李笑来老师说，与时间做朋友，但时间一直以来都不是我的朋友，它是一把杀人的刀，掠夺了我的青春，耗尽了我的激情，它会让我耄耋之年终日以泪洗面，后悔当初…。好，stop，这一年让我逐渐意识到时间的重要性,,, 并主要的业余时间都花费在投资自己身上，什么鬼 “仓井空, 王者农药,  百万英雄，吃鸡”  全都没有玩过也没有模过， 我把这些时间全部花在 学英语，学技术，跑步，阅读上面了。 但觉得时间仍然不够用，所以就每天6点钟起床，晚上11半点睡觉，中间再腾出半个小时。可以用钱解决的问题，尽量不要浪费时间，所以我尽量不做饭，并压缩做家务的时间，这样每天至少有3个小时的时间可以做自己想做的事情。</p>
<p>虽然有了一些空闲的时间来做自己的事情，但我仍然是迷茫的(谁的青春不迷茫呢)。没关系，我经常告诉自己，厚积薄发，一步步来，多看点书，积累多点知识并运用工作和生活当中，久而久之， 所谓自己的个人事业将会水到渠成。</p>
<p><br></p>
<p><strong>关于改变,  从量变到质变</strong></p>
<p>曾经犯傻，总想去改变世界，但发现连我家的小姑娘我都改变不了。 在《礼记·大学》提到 “修身，齐家， 治国， 平天下”， 说得通俗点就是连屁点的小事都做不好，甭想去改变世界。 曾经上班老是迟点，信用卡老逾期，老是不按时完成工作，并且给出的理由是 “塞车，忘了，太忙了” …但在2017年信用卡不再逾期了， 上班几乎不迟到，虽然有时候没有按时完成工作，但起码是有计划，有目标地去做，比起之前有很大的改观。</p>
<p>这一年有意识地去改变自己的生活和工作的环境，比如说工作中开发的用到IDE，从sublime, atom， 最终到vs code。 前端框架从Vue 1.x升级到2.x, 在这个过程不断地选用新的插件，弃用旧的插件， 比较axios替换vue-resource等。在生活上，有很大的改善，每天准点作息，从不赖床，刷微信和看电影替换成 阅读和学英语，这一整年，我看的电影没有超过5部。 只要沿着这条改变的道路走下去，我相信我要的那种未来的生活和工作方式，很快就会到来。</p>
<p>回顾这些年的成就，英语学习打卡847天， 跑步跑800多公里，阅读了30多本书，学习最新前端技术， 虽然在生活和工作上发生了巨大的变化，但是内心觉得缺了点什么东西拟的，我曾经思考过这个问题， 这可能是技能变现的问题，也就是说，我现在还不能用这些技能去赚钱，这个问题可能分两个层面的，1.学习这些技能的努力还不够或者方法不对，还没有达到我预期的结果。2.我所学这些技能是娱乐性的，没有带有赚钱的性质， 在《刻意练习》里提到过 “学习的动机和目的会造成人所掌握的技能水平的高低”。 那么，如果我想要技能变现的话，2018年我要做的事情，除了加大学习技能的努力和专注力之外，还要带有赚钱的动机去学习。</p>
<p>好了，我的分享就到这里，2018年会发生什么事情? 没有人知道，不过没有关系，只要 认真地对待自己，没有一天是白活的。</p>
]]></content>
      
        <categories>
            
            <category> 个人成长 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[2017年11月的总结/收获/感悟]]></title>
      <url>/2017/12/05/what-I-learnt-in-November/</url>
      <content type="html"><![CDATA[<p>光阴似箭,日月如梭, 一转眼2017年还剩下1个月了，记得好像昨天还在做2017年的计划呢，现在又要做2018年的年计划了，惭愧啊。让我好好总结，上个月我学到了什么?</p>
<a id="more"></a>
<p>“想要得到未曾拥有过的东西， 就要去做自己从未做过的事”。 人生就像航海，尽管前途有暴风雨和不可告人的危险，但越过去了，就有可能发现新大陆。 我知道我想要什么，加油喔。</p>
<p><br></p>
<p>1.自律给我自由，效仿富兰克林的十三项美德作为自己的人生准则，执行秩序 和 谦虚。其成果:生活有秩序; 11点15分前睡觉; 早上6点10起床; 说话时注意到自己言词。</p>
<p><br></p>
<p>2.计划的最小化，逐渐化。也就是每天只1至2个任务，如提前做完，再增加。</p>
<p><br></p>
<p>3.看完两本书，《富兰克林自传》，《拆掉思维里的墙》。</p>
<p><br></p>
<p>4.最近老是烦着没有时间去写 《毛泽东传》读后感，这个没有时间是借口。主要分为几个原因：</p>
<p>(1).没有做即时记录的习惯，平时想到什么就要马上记录。</p>
<p>(2).没有做提纲的习惯，平时几分钟可以做一小段的总结。</p>
<p>这今日这个时代，不大可能有长长一整段时间去为我去做某事了，所以要善用碎片化时间。</p>
<p><br></p>
<p>5.经过几次努力去解决几个难题，成功突破自我，创建了vue-router-helper插件。 这是自主创新的生涯迈出的第一步，也是最重要的一步，这个项目再一次证明只要有坚定的信念和做好事情的决心，没有什么难题做不好的。</p>
<p>回顾之前失败的原因:</p>
<p>1.方法不对，没有穷尽。2.决心不够，遇到挫折就退缩。3.能力不够。</p>
<p>以后行为的规范：</p>
<p>(1).永远不要说“没有办法”的言词.(2).树立更加坚定的信心和和超强的毅力。(3).加强学习专业知识。</p>
<p><br></p>
<p>6.从《拆掉思维里的墙》里边提到画家在画画时，都先用铅笔打好草稿，勾画出轮廓，对接下来上工作非常有利的。这个强调了做计划的重要性，计划虽然比不起变化快， 但如果没有计划，完成的时间也就是遥遥无期了。 我一直以来都有没有做计划的强烈意识，所以这方面要加强。</p>
<p><br></p>
<p>7.我曾经有过许多想法，但一直都停止想的阶段，一直不敢去做。在《拆掉思维里的墙》的提到的“小成本的冒一下险”。 与其一直在想，一直想拖延，不如 小成本的冒一下险， 先走出第一步，如果觉得不爽，就不继续做了，当娱乐呗，没有多大损失的。如果爽，继续前进。</p>
<p><br></p>
<p>8.古典老师说 要做一个有兴趣之人，要乐意试愿新事件，重在投入，成功了可以得到成果，失败了可以得到智慧，不管成不成功都可以获得快乐， 以这种观念去对待新事物是乐而不疲的。</p>
<p><br></p>
<p>9.在公司当中，遇到两个同事，他们都有一种自我保护的意识，给人的感觉很难说话，有点自私。但以我吃惯了“老好人”的亏，应该要有一些自我保护的意识，这种意识不但可以提高工作率，还可以杜绝一些白眼狼，何乐而不为？“别人帮你,那是情分,不帮你,那是本分”。</p>
<p><br></p>
<p>10.读过几本传记之后，认识到背景和环境对一个人成长，是非常重要的，尽管我无法改变背景，但我可以调整我的环境和我的习惯，从而能够促使我的成长。</p>
<p><br></p>
<p>11.佳句”困难的路越走越容易,容易的路越走越难”,  这是我从别人的刻意练习的文章学到的道理，所以一旦遇到困难时，应该采取积极的态度去处理它，它不旦让我学得更多，还能走得更远，谢谢你 “困难”老师，谢谢你的教育之恩。</p>
<p><br></p>
<p>12.微信的读书排行榜，是一种引发虚荣的功能，要避免这个陷井，，不要为了读书而读书，，而是为了成长而读书，是为了满足心中强烈的求知欲望而读书。</p>
<p><br></p>
<p>13.上个月的体验和按摩的经历，告诉我，任何一个行业都有自己一套坑人的套路，如果要避免再次这种情况，要事先研究一下它们，到从操作流程那里，有什么乘虚而入。比如按摩，按摩师会尽量避开你需要的地方，然后快到时间之后，再忽悠你加时间。</p>
<p><br></p>
<p>14.经过一些事情，足够可以证明 “人的挨剥夺的超级反应比奖励强很多”，所以尽量避免剥夺别人的东西，如果非要剥夺，就要间接剥夺法，比如要奖励某一东西来替换我们要剥夺的东西。</p>
<p><br></p>
<p>15.古典老师的“最好选择”的方法是一种深度思考的结果，是这样的，先去前面的三分一当作选择的样版，记录最高值，最低值和平均值，最后在三之二做选择，这种方法虽然不能保持选到最好的，但起码是很不错的方法。另外一点就勤于思考，这对找问题的答案很有帮助。</p>
<p><br></p>
<p>尽管这几个月的收获挺大，成长不少，但是离我想要的那种状态还差很远。完美的产品，没有一步到位的，需要不断地迭代，每一个终点都是每一个始点。革命还没有成功，同志们请继续努力。</p>
]]></content>
      
        <categories>
            
            <category> 个人成长 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[富兰克林自传读后感]]></title>
      <url>/2017/11/22/what-I-learn-from-The-Autobiography-of-Benjamin-Franklin/</url>
      <content type="html"><![CDATA[<p>我之前一直以为本杰明·富兰克林是美国某一届总统，但看完《富兰克林自传》之后，才纠正了我这种错误的观念。 我觉得富兰克林的精神和他一生的成就，贡献以及对后人的影响，是”美国总统”的所不能及的，以下富兰克林的性格和成就。</p>
<a id="more"></a>
<p><strong>好学</strong><br>读了好几本传记，里边提到的伟人，科学家等等，他们都有一个共同点，就是好学，富兰克林也不例外。我不知道这些先人是否故意杜撰的，让主人翁的经历光亮一点? 但不可否认，认真学习的确能够让人思维敏捷。 富兰克林他小时候家里条件不是很好，家里没能供他上学读书，但这样也阻止不了他认真好学。手里有零花钱时，总要拿去买书,  15岁时为了攒钱买书，成了素食主义者。</p>
<p>在哥哥的印刷所打工期间，模仿知名主编的文章以改进写作，然后匿名投给报纸，结果社会反响强烈。 在创业期间和朋友 创建 “共图社” ，做书藉共享，并与各界人士交流学习道德、政治或自然科学。年迈中年后，专注于科学研究，通过风筝-雷电试验，证明了闪电的本质是电，并发明了避雷针。</p>
<p><strong>人民的公仆</strong><br>富兰克林年轻时，就和朋友 创建 “共图社” ，它主要是做书藉共享，并定期与各界人士讨论道德、政治或自然科学等问题。创业成功后，积极热情地参与社会各种活动，并为修路，建学校，建教堂，建医院，建立防御体系出钱出力，他所做的一切，市民和政府的人都看在眼里，所以政府主动强加了他某种职责，全体市民又推选他代表他们担任地区议会里的议员。在英国的残暴统冶下，富兰克林代表美洲与英国谈判，但英国方面表示，国王拥有绝对的权威，殖民地要无条件服从。爆发美国独立战争之后，他起草了《独立宣言》，并成功说服了 法国与美国同盟，为美国独立付出了不可磨灭的贡献。</p>
<p><strong>十三美德</strong><br>别人常说“敌人只剩下自己”，其实我觉得人类的第一个敌人应该是自己。富兰克林年轻的时候，就非常理解自己，他自己知道人是很容易犯错误，于是他创立了非常著名的“富兰克林十三美德”，每天系统地记录自己的过错和反思，他的勤劳和节俭使他就在40岁时， 实现个人财富自由，并且在社会上享有盛誉。富兰克林的交际能力非常强，他经过任何一个地方都能深交很多朋友， 他的人脉关系归功于他的人格魅力</p>
<p><strong>科学研究</strong><br>富兰克林，实现个人财富自由之后，专注于科学研究和社会服务。其中的科学成果有 避雷针,电荷守恒定律, 双焦点眼镜, 蛙鞋等，由于他的发明被选为英国皇家学会院士。我在这里不只陈述他的科学成果，我只是想说的，科学研究才是富兰克林真正喜欢的行业，但他之前所做的印刷所，社会服务都一样能够做得如此完美，我们是否为我们拈轻怕重的行为而感得羞耻呢?</p>
<p><strong>致富之路</strong><br>这也是本书的一个内容，是教人如何实现个人财富自由的干货。</p>
<p>1.勤劳<br>“因为那个富兰克林的勤奋，是他的同行们望尘莫及的：我离开俱乐部回家时，他还在干活呢；他的邻居还没有起床，他又在工作了。”不管你是做任何行业，任何职业，想要做事情做好做精，勤劳是最根本的条件。事情做好了，收入自然就会有。</p>
<p>2.节俭<br>别人常说 “量入为出”，就是根据收入的多少来决定开支的限度。富兰克林自小就喜欢读书，手里有点零钱，总要拿去买书,  他在15岁时为了攒钱买书，成了素食主义者。 他把节省下来的钱，用来投资自己，请问我们15岁的时候，都在干嘛?</p>
<p>3.其他<br>不要欠债，如果你欠债 就等于你把自己的自由交给别人去支配。 也不要试尝图拖，债权人的记性总比债务人的好。<br>“今日购买不需要的东西，明日可能就会卖必需的东西”， 不要因为平宜而去购买不需要的东西。</p>
<p>本人的能力有限，本文纯属小学生写作文练习之用，如有缺陷或不足，请debug我~~</p>
]]></content>
      
        <categories>
            
            <category> 读书笔记 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[穷查理宝典:查理·芒格智慧箴言录 读书笔记]]></title>
      <url>/2017/11/05/what-I-learnt-from-Poor-Charlies-Almanack/</url>
      <content type="html"><![CDATA[<p>《穷查理宝典》是一本充满智慧的书，它的许多些观点让我醍醐灌顶。书中的内容涵盖很多关于投资，经济学，心理学，思维，传记，励志等内容，如果要去归类的话，真的很难，建议各大书店开设 “宝典”的分类，如果你准备开始去读这本书了，我相信它将会成为你人生中的宝典。</p>
<a id="more"></a>
<p>那 查理·芒格是何人呢？他被称之为股神巴菲特背后的男人， 巴菲特自己曾经有趣的形容，芒格使得他从猩猩迅速进化到了人类，“否则会穷很多”，而巴菲特的好朋友盖茨也曾经指出，“如果没有芒格的辅佐，巴菲特恐怕很难做得这么好！”</p>
<p><br></p>
<p>以下，是我看完这本书之后，觉得对我自己感触很深的，很值得我去学习和反思的一些内容。</p>
<p><br></p>
<h4 id="查理·芒格的性格"><a href="#查理·芒格的性格" class="headerlink" title="查理·芒格的性格"></a><strong>查理·芒格的性格</strong></h4><p>书中的有一些内容提到 查理·芒格的演讲，文章，对话，回忆录等，描述了查理芒格的性格，很值得我去学习，如果他没有那良好的个性素质(自律、耐心、冷静、独立)，估计他无法和巴菲特创立伟大的 伯克希尔·哈撒韦公司。</p>
<p><strong>好学</strong>  查理说 “我这辈子遇到的聪明人（来自各行各业的聪明人）没有不每天阅读的–没有，一个都没有。沃伦读书之多，我读书之多，可能会让你感到吃惊。我的孩子们都笑话我。他们觉得我是一本长了两条腿的书。”</p>
<p><strong>诚实</strong>  诚实是最好的策略 路易斯 文森狄说过： 如果你说的是真话，你就不用记住你的谎言，我们不想搞得太复杂，所以总是说实话。“</p>
<p><strong>独立思考 </strong> 你是正确的，还是错误的，并不取决于大家是否同意你。你是正确的，是因为你的资料和推理是正确的。</p>
<p><strong>纪律和耐心</strong> 查理认为未雨绸缪、富有耐心、律己严厉和不偏不倚是最基本的指导原则。不管周围的人怎么想，不管自己的情绪有什么波动，他永不背离这些原则，尽管许多人都认为“做人要懂得随机应变”。</p>
<p><strong>不自欺的精神</strong> 非常善于破坏自己最爱的观念， 不像许多人很荒唐，死抱着错误的观不放。 凯恩斯说过”介绍新观念倒不是很难，难的就是清除那些旧的观念“。</p>
<p><br></p>
<h4 id="逆向思维"><a href="#逆向思维" class="headerlink" title="逆向思维"></a>逆向思维</h4><p>非常有用的思维方式，我很早之前就听过了，但观念很模糊的，而且没有实践过。《穷查理宝典》再一次加强了我对它的认识，里边提到的”我只想知道将来我会死在什么地方，这样我就永远不去那儿了”。就通过逆向思维把所有的坑(风险)都列出来，虽然不能确保把事做好，但起码不会把事做烂，按照概率论来说，提高了成功率。</p>
<p><br></p>
<h4 id="心理学"><a href="#心理学" class="headerlink" title="心理学"></a>心理学</h4><p>查理·芒格的人类误判心理学告诉我，想要在生活和工作中有非常出色的成就，一定要读懂人性。 那句话是这样说的“知人者智，自知者明”。内容里边让我印象最深刻的是  奖励和惩罚超级反应倾向， 妒忌倾向， 被剥夺超级反应倾向。关于人性方面，我有一些经验就是 每当我回忆往年的时候，我总是想起都是那些让我痛苦的日子，而不是快乐的日子，因为这种倾向根植在我的基因里边了。</p>
<p><br></p>
<h4 id="普世智慧"><a href="#普世智慧" class="headerlink" title="普世智慧"></a>普世智慧</h4><p>什么是普世智慧呢?  简单地说：宇宙万物一个相互作用的整体, 只要把有关联的事物，组成多元思维框架，并且能够产生lollapalooza效应的智慧。lollapalooza可以理解为化学反应，用公式来表示就是  1+1+1 &gt; 3</p>
<p>所提到有关联的事物，就是跨学科的学问 就是要避免“头痛治头,脚痛治脚”的理论，因为头痛有可能肾虚引起的。 只有通过跨学科的多元思维框架，才能很好地解决问题。书中是这样说的“多元维思模型， 它们借用并完美地糅合了许多来自各个传统学科的分析工具、方法和公式，这些学科包括历史学、心理学、生理学、数学、工程学、生物学、物理学、化学、统计学、经济学等。查理采用“生态”投资分析法的无懈可击的理由是：几乎每个系统都受到多种因素的影响，所以若要理解这样的系统，就必须熟练地运用来自不同学科的多元思维模式。”</p>
<p><br></p>
<h4 id="非常有用的思维模型"><a href="#非常有用的思维模型" class="headerlink" title="非常有用的思维模型"></a>非常有用的思维模型</h4><p>芒格有大约100种思维模型，其中最重要的是 倾覆力矩、自我催化模型, 工程学的冗余备份模型(后备系统), 断裂点理论, 数学的复利模型, 物理学和化学的临界点概念, 生物学的现代达尔文综合模型, 心理学的认知误判模型。（对于具体的原理不懂的，可以自行百度）</p>
<p><br></p>
<h4 id="自作聪明失败论"><a href="#自作聪明失败论" class="headerlink" title="自作聪明失败论"></a>自作聪明失败论</h4><p>查理芒格自来不自作聪明，中国有句古话 “人非圣贤 孰能无过”, 不管你多么聪明，不管你的技能是经过了非常严格的训练，你都有可能会犯错的。世界上很多人就是想得太多，读书太少，自作聪明，后果就造成许多悲剧(我也是其中一个受害者)。所以除了保待谦虚的态度之外，查理芒格每次做决策之前，都需要他那份投资原则检查清单。</p>
<p><br></p>
<h4 id="对待时间的价值观"><a href="#对待时间的价值观" class="headerlink" title="对待时间的价值观"></a>对待时间的价值观</h4><p>医学博士约瑟夫·米拉值得效仿的价值观， 他休了一年假，把所有X光片弄到电脑里，仔细地保存和编排。他每天工作17个小时，而且每周工作七天，整整坚持了一年。这也算是休假啊。在假期结束的时候，他写出了世界上最好的两本骨癌病理学教科书中的一本。如果你们的价值观跟米拉差不多，你们想取得多大的成就就能取得多大的成就。</p>
<p><br></p>
<h4 id="投资原则检查清单"><a href="#投资原则检查清单" class="headerlink" title="投资原则检查清单"></a>投资原则检查清单</h4><p>聪明的飞行员即使才华再过人，经验再丰富，也决不会不使用检查清单。投资也一样。</p>
<p>风险 - 通过逆向思维把所有的坑都列出来<br>独立 - 客观和理性的态度需要独立思考<br>准备 - 通过广泛的阅读把自己培养成一个终生自学者；培养好奇心，每天努力使自己聪明一点点，并随时做好准备。<br>谦虚 - 承认自己的无知是智慧的开端<br>严格分析 - 使用科学方法和有效的检查清单能够最大限度地减少错误和疏忽<br>配置 - 正确地配置资本是投资者最重要的工作<br>耐心 - 克制人类天生爱行动的偏好<br>决心 - 当合适的时机出现时，要坚决地采取行动<br>改变 - 在生活中要学会改变和接受无法消除的复杂性<br>专注 - 别把事情搞复杂，记住你原来要做的事</p>
<p><br></p>
<h4 id="推荐书单"><a href="#推荐书单" class="headerlink" title="推荐书单:"></a>推荐书单:</h4><p>枪炮、病菌与钢铁  豆瓣评分8.8<br>自私的基因  豆瓣评分8.7  5353<br>只有偏执狂才能生存  豆瓣评分7.4<br>谈判力  豆瓣评分7.7<br>基因组  豆瓣评分9.0巴菲特的投资组合    豆瓣评分8.0<br>国富国穷  豆瓣评分8.3<br>洛克菲勒:一个关于财富的神话  豆瓣评分8.3<br>生活在极限之内  豆瓣评分8.2<br>第三种黑猩猩：人类的身世与未来  豆瓣评分8.8<br>温度，决定一切  豆瓣评分 8.7<br>我生活的种种模式  豆瓣评分8.2<br>苏格兰如何发明现代世界  豆瓣评分8.2<br>诚信的背后  豆瓣评分8.1<br>深奥的简洁  豆瓣评分8.1<br>富兰克林自传 豆瓣评分8.5</p>
<p>书中还提到要多看人物传记，要和“已逝的伟人”交朋友。就确定未来而言，没有比历史更好的老师……一本30美元的历史书里隐藏着价值数十亿美元的答案。</p>
<p><br></p>
<h4 id="意外收获："><a href="#意外收获：" class="headerlink" title="意外收获："></a>意外收获：</h4><p><strong>理查德费曼 理解事物的本质</strong>两种不同方式的理解, 这个世界上，理解一件事有两种不同的方式。第一种是聚焦在记住一件事的名称。第二种理解方式，是聚焦在真正理解这件事的实质。 这是一个很简单的道理：知道一件事的名称，并不等同于真正理解它。这就像是我们从小学习数学，一直学到大学，我们从背九九乘法表，一直记到偏微分方程，却偏偏没有学会“数学思维”，真正学会从数学的角度来看待身边发生的问题。</p>
<p><br></p>
<p><strong>大猩猩理论 及 费曼的学习方法</strong>查理·芒格的“大猩猩理论”一个聪明人进入一个有大猩猩的房间，解释他的想法是什么，而那个大猩猩只是坐在那里吃它的香蕉。结束这段谈话后，那个解释的人出来时一定变得更聪明了。就是用简洁的语言去解释复杂的概念，流程 选择高级概念 &gt; 教授别人 &gt; 返工 &gt; 回顾和精简。</p>
<p><br></p>
<p>本人的能力有限，如果你有更好的建议和想法，请告诉我，谢谢。</p>
]]></content>
      
        <categories>
            
            <category> 读书笔记 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[2017年10月的总结/收获/感悟]]></title>
      <url>/2017/11/02/what-I-learnt-in-october/</url>
      <content type="html"><![CDATA[<p>激情的十月在我眼皮底下悄悄地过去了, 我才慢慢地意识时间是多么的宝贵.  这个十月里，我苦苦寻找一种快乐，它是金钱，看电影，打游戏，甚至性爱给不到的。</p>
 <a id="more"></a>
<p>1.阅读 《穷查理宝典》受益匪浅，先不谈其收获，就说静下心来认认真真读书这件事已经是非常了不起的了。要养成良好的阅读习惯，因为这是改变命运， 过上美好人生的最方便，成本最低的方法。</p>
<p>2.读了好几本传记，里边提到的伟人，科学家等等，他们都有一个共同点，就是认真，就算是自己不喜欢的但必须要做的事情，他们都会把事情做好，而不会有发任何牢骚。任何伟大的事业和理想，都是始于眼前的小事。</p>
<p>3.查理芒格 自作聪明失败论 和“容忍少许不公平，为了实现更公平”的理论完成颠覆了我的认知。</p>
<p>4.自我教育，是在校学习时必须掌握的技能，可惜我没能掌握。 我花了整整10年才明白这个道理，后来又花了整整1年时间才懂得我应该去学什么这个道理。所以习得新知识，需要花很长时间和很多精力才能掌握的，希望日后，我能够保持这种增长的势头。</p>
<p>5.如何把学习和提升自己转化为一种娱乐或消遣的方式呢？除了在学习中加入趣味性和娱乐性是远远不够的，我相信这是内心一种转换。 所以我时常问自己，什么事情才能让我真正快乐呢? 这种快乐是金钱，看电影，打游戏，甚至性爱给不到的。 </p>
<p>6.只要有恒心，不怕困难，没有什么问题是解决不了的，对于做技术创新的，如果想要突破，需要的就是这种精神，遇到难题时，不退缩，不绕道，要直接走过去，这样才会有惊喜。</p>
<p>7.经过这几年体育缎练，我可以非常确定的是，长期坚持跑步是一个非常好的习惯。当我连续跑20多公里之后，已经筋疲力尽了，几乎要窒息了，但我仍然继续跑下去..。也就是说在生活和工作当中，已经没有比这个更难的难题了。</p>
<p>8.要树立积极和乐观的态度去对待坏消息，平静的心静去对待好消息。那句话是这样说的 “有坏消息要马上汇报，好消息我们可以等待。”</p>
<p>9.时间利用最大化, 了解到李笑来和约瑟夫米拉，利用休假的时间，做了许多有价值的东西，他们对待时间的态度很值得去学习的。这个又回到什么事情才能让我真正快乐的事上了。</p>
<p>10.预防比总冶疗重要, 人具有不善于改变自己的天性，一旦形成了的坏习惯，就很难去改变了，所以一定杜绝有坏习惯的倾向。这两年我为什么会改变，因为早些年，经历过一些非常痛苦的事情，才会意识要改变，所以不要等到着火了之后，才去救火，因为那个时候已经太晚了。</p>
<p>11.查理·芒格的人类误判心理学告诉我，想要在生活和工作中有非常出色的成就，一定要读懂人性。 那句话是这样说的“知人者智，自知者明”。</p>
<p>12.不管是多么聪明的人，不管经过多少次严格训练，在做决策时都有可能会犯错。所以在做决策的时候，要遵守一套行为规范，就像芒格说的那样需要一份检查清单。</p>
<p>13.查理芒格提到的逆向思维以及相关的案例，并且在概率论的影响下， 加强了我对它的认识。 以后一定要使用逆向思维的去思考问题，虽然不能确保我把事做好，但起码不会把事做烂。</p>
]]></content>
      
        <categories>
            
            <category> 个人成长 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[Vue框架在苹果手机上无法正常使用微信分享接口的解决方案]]></title>
      <url>/2017/10/27/wechat-sharing-functions-dont-work-properly/</url>
      <content type="html"><![CDATA[<p>最近在做一个项目，用的Vue框架，路由是vue-router，需要加入微信分享功能， 据了解官方的插件是 weixin-js-sdk,, 根据里边的官方使用方法，能够在安卓手机上正常使用分享功能，但是在苹果手机上面，就出许多问题。</p>
<a id="more"></a>
<p>本文所涉及的工具和插件有</p>
<p>Vue2.x,  Vue-router2.x,  微信web开发者工具v0.7版</p>
]]></content>
      
        <categories>
            
            <category> 前端 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
            <tag> wechat </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[axios请求超时,设置重新请求的完美解决方法]]></title>
      <url>/2017/10/17/vue-axios-timeout-retry-callback/</url>
      <content type="html"><![CDATA[<p>自从使用Vue2之后，就使用官方推荐的axios的插件来调用API，在使用过程中，如果服务器或者网络不稳定掉包了, 你们该如何处理呢? 下面我给你们分享一下我的经历。</p>
<a id="more"></a>
<p><br></p>
<h4 id="具体原因"><a href="#具体原因" class="headerlink" title="具体原因"></a>具体原因</h4><p>最近公司在做一个项目, 服务端数据接口用的是Php输出的API, 有时候在调用的过程中会失败, 在谷歌浏览器里边显示Provisional headers are shown。</p>
<p><img src="/2017/10/17/vue-axios-timeout-retry-callback/1.png" alt=""></p>
<p>按照搜索引擎给出来的解决方案，解决不了我的问题.   </p>
<p><br></p>
<p>最近在研究AOP这个开发编程的概念，axios开发说明里边提到的栏截器(axios.Interceptors)应该是这种机制，降低代码耦合度，提高程序的可重用性，同时提高了开发的效率。</p>
<p><br></p>
<h4 id="带坑的解决方案一"><a href="#带坑的解决方案一" class="headerlink" title="带坑的解决方案一"></a>带坑的解决方案一</h4><p>我的经验有限，觉得唯一能做的，就是axios请求超时之后做一个重新请求。通过研究 axios的使用说明，给它设置一个timeout = 6000</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">axios.defaults.timeout =  <span class="number">6000</span>;</div></pre></td></tr></table></figure>
<p>然后加一个栏截器.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Add a request interceptor</span></div><div class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something before request is sent</span></div><div class="line">    <span class="keyword">return</span> config;</div><div class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with request error</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Add a response interceptor</span></div><div class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with response data</span></div><div class="line">    <span class="keyword">return</span> response;</div><div class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with response error</span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这个栏截器作用是 如果在请求超时之后，栏截器可以捕抓到信息，然后再进行下一步操作，也就是我想要用 重新请求。</p>
<p><b></b></p>
<p>这里是相关的页面数据请求。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.$axios.get(url, &#123;<span class="attr">params</span>:&#123;<span class="attr">load</span>:<span class="string">'noload'</span>&#125;&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">	<span class="comment">//dosomething();</span></div><div class="line">&#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</div><div class="line">	<span class="comment">//超时之后在这里捕抓错误信息.</span></div><div class="line">	<span class="keyword">if</span> (error.response) &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'error.response'</span>)</div><div class="line">		<span class="built_in">console</span>.log(error.response);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.request) &#123;</div><div class="line">		<span class="built_in">console</span>.log(error.request)</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'error.request'</span>)</div><div class="line">		<span class="keyword">if</span>(error.request.readyState == <span class="number">4</span> &amp;&amp; error.request.status == <span class="number">0</span>)&#123;</div><div class="line">			<span class="comment">//我在这里重新请求</span></div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'Error'</span>, error.message);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(error.config);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><br></p>
<p>超时之后, 报出 Uncaught (in promise) Error: timeout of  xxx ms exceeded的错误。</p>
<p><img src="/2017/10/17/vue-axios-timeout-retry-callback/2.png" alt=""></p>
<p>在 catch那里，它返回的是error.request错误，所以就在这里做 retry的功能,  经过测试是可以实现重新请求的功功能， 虽然能够实现 超时重新请求的功能，但很麻烦，需要每一个请API的页面里边要设置重新请求。</p>
<p><img src="/2017/10/17/vue-axios-timeout-retry-callback/4.png" alt=""></p>
<p>看上面，我这个项目有几十个.vue 文件，如果每个页面都要去设置超时重新请求的功能，那我要疯掉的. </p>
<p><br></p>
<p>而且这个机制还有一个严重的bug，就是被请求的链接失效或其他原因造成无法正常访问的时候，这个机制失效了，它不会等待我设定的6秒，而且一直在刷，一秒种请求几十次，很容易就把服务器搞垮了，请看下图, 一眨眼的功能，它就请求了146次。</p>
<p><img src="/2017/10/17/vue-axios-timeout-retry-callback/3.png" alt=""></p>
<p><br></p>
<h4 id="带坑的解决方案二"><a href="#带坑的解决方案二" class="headerlink" title="带坑的解决方案二"></a>带坑的解决方案二</h4><p>研究了axios的源代码，超时后,  会在拦截器那里 axios.interceptors.response 捕抓到错误信息,  且 error.code = “ECONNABORTED”，具体链接</p>
<p> <a href="https://github.com/axios/axios/blob/26b06391f831ef98606ec0ed406d2be1742e9850/lib/adapters/xhr.js#L95-L101" target="_blank" rel="external">https://github.com/axios/axios/blob/26b06391f831ef98606ec0ed406d2be1742e9850/lib/adapters/xhr.js#L95-L101</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Handle timeout</span></div><div class="line">request.ontimeout = <span class="function"><span class="keyword">function</span> <span class="title">handleTimeout</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  reject(createError(<span class="string">'timeout of '</span> + config.timeout + <span class="string">'ms exceeded'</span>, config, <span class="string">'ECONNABORTED'</span>,</div><div class="line">    request));</div><div class="line"></div><div class="line">  <span class="comment">// Clean up request</span></div><div class="line">  request = <span class="literal">null</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>所以，我的全局超时重新获取的解决方案这样的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">....</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> originalRequest = error.config;</div><div class="line">	<span class="keyword">if</span>(error.code == <span class="string">'ECONNABORTED'</span> &amp;&amp; error.message.indexOf(<span class="string">'timeout'</span>)!=<span class="number">-1</span> &amp;&amp; !originalRequest._retry)&#123;</div><div class="line">			originalRequest._retry = <span class="literal">true</span></div><div class="line">			<span class="keyword">return</span> axios.request(originalRequest);</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这个方法，也可以实现得新请求，但有两个问题，1是它只重新请求1次，如果再超时的话，它就停止了，不会再请求。第2个问题是，我在每个有数据请求的页面那里，做了许多操作，比如 this.$axios.get(url).then之后操作。</p>
<p><br></p>
<h4 id="完成的解决方法"><a href="#完成的解决方法" class="headerlink" title="完成的解决方法"></a>完成的解决方法</h4><p>以AOP编程方式，我需要的是一个 超时重新请求的全局功能， 要在axios.Interceptors下功夫，在github的axios的issue找了别人的一些解决方法，终于找到了一个完成解决方案，就是下面这个。</p>
<p><a href="https://github.com/axios/axios/issues/164#issuecomment-327837467" target="_blank" rel="external">https://github.com/axios/axios/issues/164#issuecomment-327837467</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在main.js设置全局的请求次数，请求的间隙</span></div><div class="line">axios.defaults.retry = <span class="number">4</span>;</div><div class="line">axios.defaults.retryDelay = <span class="number">1000</span>;</div><div class="line"></div><div class="line">axios.interceptors.response.use(<span class="literal">undefined</span>, <span class="function"><span class="keyword">function</span> <span class="title">axiosRetryInterceptor</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> config = err.config;</div><div class="line">    <span class="comment">// If config does not exist or the retry option is not set, reject</span></div><div class="line">    <span class="keyword">if</span>(!config || !config.retry) <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</div><div class="line">    </div><div class="line">    <span class="comment">// Set the variable for keeping track of the retry count</span></div><div class="line">    config.__retryCount = config.__retryCount || <span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// Check if we've maxed out the total number of retries</span></div><div class="line">    <span class="keyword">if</span>(config.__retryCount &gt;= config.retry) &#123;</div><div class="line">        <span class="comment">// Reject with the error</span></div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// Increase the retry count</span></div><div class="line">    config.__retryCount += <span class="number">1</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// Create new promise to handle exponential backoff</span></div><div class="line">    <span class="keyword">var</span> backoff = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            resolve();</div><div class="line">        &#125;, config.retryDelay || <span class="number">1</span>);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">// Return the promise in which recalls axios to retry the request</span></div><div class="line">    <span class="keyword">return</span> backoff.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> axios(config);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>其他的那个几十个.vue页面的 this.$axios的get 和post 的方法根本就不需要去修改它们的代码。</p>
<p>在这个过程中，谢谢jooger给予大量的技术支持，这是他的个人信息 <a href="https://github.com/jo0ger" target="_blank" rel="external">https://github.com/jo0ger</a> ， 谢谢。</p>
<p><br></p>
<p>以下是我做的一个试验。。把axios.defaults.retryDelay = 500, 请求 www.facebook.com</p>
<p><img src="/2017/10/17/vue-axios-timeout-retry-callback/5.png" alt=""></p>
<p>按照惯例，给出源代码，如有更好的建议，请告诉我，谢谢。</p>
<div class="github-widget" data-repo="ssttm169/use-axios-well"></div>]]></content>
      
        <categories>
            
            <category> 前端 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[如何快速启动mongodb服务]]></title>
      <url>/2017/10/12/how-to-launch-mongodb-automatically/</url>
      <content type="html"><![CDATA[<p>在桌面上新建一个空的  启动MongoDB.bat , 输入以内命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">D:</div><div class="line">cd D:\mongodb\bin</div><div class="line">net stop MongoDB</div><div class="line">net start MongoDB</div><div class="line">cd D:\Program Files\robo3</div><div class="line">start robo3t.exe</div></pre></td></tr></table></figure>
<a id="more"></a>
<div class="github-widget" data-repo="ssttm169/launch_mongodb"></div>
]]></content>
      
        <categories>
            
            <category> 数据库 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> mongodb </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[2017年9月的总结/收获/感悟]]></title>
      <url>/2017/10/09/what-I-learnt-in-september/</url>
      <content type="html"><![CDATA[<p>9月份的收获满满, 让我总结一下这一个月的感悟和收获。</p>
<p>1.如果你想得到你从未得到的东西，你就要做你从未做过的事情。</p>
<p>2.要迈出自己的舒适区，相信收获和成就会更多更大。要想尽方法去证明自己持有的思维和方法是错误的，要不断地去改进自己做事的方式。</p>
<a id="more"></a>
<p>3.不管做任何的事情，有意识地保护自己，风险最小化，利益最大化，永远把自己处于优势。</p>
<p>4.成为高手的捷径, 发现高手 &gt; 学习高手 &gt; 互动高手 &gt; 最终成为高手。</p>
<p>5.做事有计划，事后有总结，要对结果负责，就算是失败了，也不太自责，要保持积极和乐观的心态，总结到底为什么会失败，下次再努力，计划 &gt; 执行 &gt; 失败 &gt; 总结 &gt; 提升积极性和能力 &gt; 计划…这是一个良性循环。</p>
<p>6.我现在感得骄傲的好习惯，其实很脆弱的，因为我根本就没有从内心去改变自己。唯有由内心驱使的习惯，才是好习惯，这种习惯，是雷打不动的，看来我还是需要继续努力，继续加油。</p>
<p>7.要把仅有的时间和精力，花费在自己的影响圈上面，其他的东西随他们去吧。</p>
<p>8.一切均为概率论, 如何出门不挨车撞? 遵守交通规则，不闯红灯，不抢道，不贪快，晚上出门时不要穿深色的衣服，这样发生车祸的概率是非常少。这种概率论适用任何行业，任何事物..</p>
<p>9.也是概率论, 查理芒格自创的投资方法，类拟于排除法，开始之前，成功投资的概率是12%, 第1步.去掉各种安全隐患(风险) , 提升到40%， 第2步 经过多元思维去分折, 提升到60%,  第3步 耐心等待 80%….。</p>
<p>10.了解到查理芒格是一个非常聪明, 极度自律, 诚实正直, 很有耐心的人, 他的成就归功于他的一生从来都没有停止过自我教育, 他是一个非常值得学习的对象。</p>
<p>11.每天都要争取比昨天聪明一点点，要出色地完成自己手头上的工作，保持这种状态，经过漫长一段时间之后(可能是3年，或5年, 10年)，就能过上完美的人生。</p>
]]></content>
      
        <categories>
            
            <category> 个人成长 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[Hexo开启post_asset_folder后, 安装hexo-asset-image,不起作用的问题]]></title>
      <url>/2017/09/29/the-problem-when-use-post-asset-folder/</url>
      <content type="html"><![CDATA[<p>使用Hexo和github搭建博客，真是挺有趣的事情，因为对于我们来说，随便敲几行代码，就可以拥有一个非常漂亮的博客。 但在写作的过程中，使用Typora(一个markdown编辑器)插入图片的时候，非常不顺手。后来了解到用hexo-asset-image可以提升我的写作效率,,所以开始吧。</p>
<a id="more"></a>
<p><br></p>
<h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>在nodejs里边安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-asset-image --save</div></pre></td></tr></table></figure>
<div align="center"><br><img src="/2017/09/29/the-problem-when-use-post-asset-folder/1.png" alt="安装hexo-asset-image"><br></div>


<p><br></p>
<p>把在hexo根目下的_config.yml设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">post_asset_folder: true</div></pre></td></tr></table></figure>
<p><br></p>
<h4 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h4><p>安装完了之后，新建一篇名为test-img的文章</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new [layout] test-img</div></pre></td></tr></table></figure>
<div align="center"><br><br><img src="/2017/09/29/the-problem-when-use-post-asset-folder/2.png" alt=""><br><br></div>



<p>  <br></p>
<p>现在可以看到source/_posts里边，除了有test-img.md，还多一个文件夹 test-img</p>
<div align="center"><br><br><img src="/2017/09/29/the-problem-when-use-post-asset-folder/3.png" alt=""></div>



<p><br></p>
<p>在里边我放一张名为me.jpg的图片, 插入图片的时候，输入  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![](test-img/me.jpg)</div></pre></td></tr></table></figure>
<p>如图所示：</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/4.png" alt=""></div>



<p><br></p>
<h4 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h4><p>当我回到nodejs的时候，发现不对劲~</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/5.png" alt=""></div>



<p><br></p>
<p>然后，我去页面看，图片不显示， chrome-devtools显示，找不到图片。</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/6.png" alt=""></div>



<p><br></p>
<p>当我用hexo g生成文件的时候，发现报错， 如下：</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/7.png" alt=""></div>

<p>FATAL something’s wrong. May be you can find the solution here…..</p>
<p>Error: ENOENT: no such file or directory, open ‘D:\nodejs6.5\hexo_blog\public\20<br>17-09-29-test-img.html\me.jpg’  </p>
<p>仔细一看路径是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\public\2017-09-29-test-img.html\me.jpg</div></pre></td></tr></table></figure>
<p><br></p>
<p>在public文件夹里边也找不到2017-09-29-test-img.html文件夹。</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/8.png" alt=""></div>



<p><br></p>
<p>百思不得期解，我了解别人的博客都是的链接都是       域名/年份/月份/文件名  的路径， 比如：<a href="http://www.54tianzhisheng.cn/2017/09/23/Guava-limit/" target="_blank" rel="external">http://www.54tianzhisheng.cn/2017/09/23/Guava-limit/</a></p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/9.png" alt=""></div>



<p><br></p>
<p>而且我的路径是 <a href="http://www.itomtan.com/2017-09-27-how-to-use-wechat-debug.html，">http://www.itomtan.com/2017-09-27-how-to-use-wechat-debug.html，</a> 所有的html都是放到</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/10.png" alt=""></div>



<p><br></p>
<h4 id="找到原因"><a href="#找到原因" class="headerlink" title="找到原因"></a>找到原因</h4><p>为了满意的我好奇心~~，最终我找到了原因。原来，之前我把hexo根目下的_config.yml， 把permalink 设置为 year-:month-:day-:title.html，hexo就会在根目下生成html, 而导致 生成 相关的文件夹失效。</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/11.png" alt=""></div>



<p>是 permalink 和 post_asset_folder 这两个参数是相互影响的。</p>
<p><br></p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>把hexo根目下的_config.yml， 把permalink 设置为 :year/:month/:day/:title/</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">permalink: :year/:month/:day/:title/</div></pre></td></tr></table></figure>
<p>好，重新hexo clean &amp;&amp; hexo g , 得到的就是我们要的那种方路径，而且图片显示正常了。</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/12.png" alt=""></div>



<p><br></p>
<p>温馨提示一下：</p>
<p>用Typora插入图片时  输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![](文件名.png)</div></pre></td></tr></table></figure>
<p>的时候，虽然在图片网页上能够正常显示，但是在Typora编辑时无法显示，那如何才能让Typora正常显示呢? 这里分享一个小技巧：</p>
<p>在Typora中, 选择Edit &gt; Image Tools &gt;  Use Image Root Path， 然后选择你要的相关文件夹，选择之后，在md文件头上 会多一个 typora-root-url: xxxx, 好了，现在可以正常显示了。具体操作看下图。</p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/13.png" alt=""></div>

<p><br></p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/14.png" alt=""></div>

<p><br></p>
<div align="center"><img src="/2017/09/29/the-problem-when-use-post-asset-folder/15.png" alt=""></div>

<p><br></p>
<p>最后，分享一下源代码：</p>
<div class="github-widget" data-repo="ssttm169/hexo_blog"></div>]]></content>
      
        <categories>
            
            <category> 前端 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[H5,移动端调试神器 微信web开发者工具]]></title>
      <url>/2017/09/27/how-to-use-wechat-debug/</url>
      <content type="html"><![CDATA[<p> 微信整合了社交，支付，自媒体等强大的功能，现在许多H5的网页都是通过微信的浏览的，所以在开发过程，是避免不了出现问题，但是在手机上浏览，我们是无法知道是哪里出错了。对于这个问题， 可以使用微信web开发者工具解决。</p>
<a id="more"></a>
<p>名称为：wechat_web_devtools_0.7.0_x64.exe。</p>
<h4 id="扫码登陆"><a href="#扫码登陆" class="headerlink" title="扫码登陆"></a>扫码登陆</h4><p>打开工具之后, 打开微信，扫码登陆</p>
<div align="center"><br><img src="/2017/09/27/how-to-use-wechat-debug/1.png" alt="扫码登陆"><br></div>


<h4 id="点击移动调试"><a href="#点击移动调试" class="headerlink" title="点击移动调试"></a>点击移动调试</h4><p>登录成功之后，点击移动调试，按照里边说明所示，</p>
<div align="center"><br><img src="/2017/09/27/how-to-use-wechat-debug/2.png" alt="点击移动调试"><br></div>


<h4 id="设置wifi的代理"><a href="#设置wifi的代理" class="headerlink" title="设置wifi的代理"></a>设置wifi的代理</h4><div align="center"><br><img src="/2017/09/27/how-to-use-wechat-debug/3.png" alt="按照里边说明所示"><br></div>


<h4 id="开始调试"><a href="#开始调试" class="headerlink" title="开始调试"></a>开始调试</h4><p>手机设置成功之后，点击 开始调试</p>
<div align="center"><br><img src="/2017/09/27/how-to-use-wechat-debug/4.png" alt="开始调试"><br></div>



<p><strong>注意，如果系统提示你升级，千万不要升级，新版删除移动调试的功能：</strong></p>
<p>如果你找不到安装文件，我这里提供一下</p>
<div class="github-widget" data-repo="ssttm169/wechat_web_devtools_0.7.0_x64"></div>



]]></content>
      
        <categories>
            
            <category> 工具使用 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 微信web开发者工具 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[做人做事准则]]></title>
      <url>/2017/09/27/how-to-be-a-man/</url>
      <content type="html"><![CDATA[<p>1.不管发生什么事情，都不要乱发脾气，要冷静，想清楚之后，再做决定。<br>2.时间利用最大化，不浪费一分一秒。<br><a id="more"></a><br>3.不管多忙，都要保待良好的阅读习惯，因为这是快速成长的方式之一。<br>4.做事有计划，事后有总结，要对结果负责，否则无法按时完成任务，也不能改进做事的方式，没有收获等于浪费时间，浪费生命。<br>5.积极主动，把被动变成主动，杜绝消极的心态。 就算遇到挫折，也不要灰心，保持积极的心态，总结反思，重新再来。<br>6.有意志地缎练说话的能力，会说话能顶个千万雄师。<br>7.讲诚信，答应人家的事情，要按时按量完成。<br>8.每天都必须有一点点进步，有一点点收获，还记得越努力越幸运的公式吗~？<br>9.以学习的心态去工作，用新的方法解决问题，在工作中学习，在学习中工作。</p>
]]></content>
      
        <categories>
            
            <category> 个人成长 </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[设置contentEditable="true"作为文本编辑器，定位光标解决办法]]></title>
      <url>/2017/09/27/hello-world/</url>
      <content type="html"><![CDATA[<p>html部分</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ql-editor ql-blank"</span> <span class="attr">id</span>=<span class="string">"myEditor"</span> <span class="attr">style</span>=<span class="string">"padding:10px;width: 100%;height: 100%;overflow-y: scroll;"</span> <span class="attr">contentEditable</span>=<span class="string">"true"</span> <span class="attr">data-placeholder</span>=<span class="string">"这里输入内容!"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>设置焦点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">setCaretPosition() &#123;</div><div class="line">    <span class="keyword">var</span> sel;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.savedRange != <span class="literal">null</span>) &#123;</div><div class="line"></div><div class="line">        sel = <span class="keyword">this</span>.win.getSelection();</div><div class="line">        <span class="keyword">if</span> (sel.rangeCount &gt; <span class="number">0</span>)</div><div class="line">            sel.removeAllRanges();</div><div class="line">        sel.addRange(<span class="keyword">this</span>.savedRange);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( (sel = <span class="keyword">this</span>.doc.selection) &amp;&amp; sel.type != <span class="string">"Control"</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.win.getSelection().addRange(<span class="keyword">this</span>.savedRange);</div><div class="line">    &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>获取焦点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">getCaretCharacterOffsetWithin() &#123;</div><div class="line">    <span class="keyword">var</span> caretOffset = <span class="number">0</span>;</div><div class="line">    <span class="keyword">var</span> sel;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.win.getSelection != <span class="string">"undefined"</span>) &#123;</div><div class="line">        sel = <span class="keyword">this</span>.win.getSelection();</div><div class="line">        <span class="keyword">if</span> (sel.rangeCount &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">var</span> range = <span class="keyword">this</span>.win.getSelection().getRangeAt(<span class="number">0</span>);</div><div class="line">            <span class="keyword">var</span> preCaretRange = range.cloneRange();</div><div class="line">            preCaretRange.selectNodeContents(<span class="keyword">this</span>.editor);</div><div class="line">            preCaretRange.setEnd(range.endContainer, range.endOffset);</div><div class="line">            caretOffset = preCaretRange.toString().length;</div><div class="line">            <span class="keyword">this</span>.savedRange = range</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( (sel = <span class="keyword">this</span>.doc.selection) &amp;&amp; sel.type != <span class="string">"Control"</span>) &#123;</div><div class="line">        <span class="keyword">var</span> textRange = sel.createRange();</div><div class="line">        <span class="keyword">var</span> preCaretTextRange = <span class="keyword">this</span>.doc.body.createTextRange();</div><div class="line">        preCaretTextRange.moveToElementText(<span class="keyword">this</span>.editor);</div><div class="line">        preCaretTextRange.setEndPoint(<span class="string">"EndToEnd"</span>, textRange);</div><div class="line">        caretOffset = preCaretTextRange.text.length;</div><div class="line">        <span class="keyword">this</span>.savedRange = textRange</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.caretOffset = caretOffset;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>源代码使用Vue2 + Vux</p>
<p>为了方便测试，源代码调用了Vux的WechatEmotion组件，在编辑器中插件图片。</p>
<p>github源代码的网址如下：</p>
<div class="github-widget" data-repo="ssttm169/tom-editor"></div>


]]></content>
      
        <categories>
            
            <category> 前端 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Vue </tag>
            
            <tag> 编辑器 </tag>
            
            <tag> Vux </tag>
            
            <tag> 前端 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
