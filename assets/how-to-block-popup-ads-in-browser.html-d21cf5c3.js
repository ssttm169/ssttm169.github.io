import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,a as t,d as p,b as e}from"./app-3ea06b8d.js";const o={},c=p("p",null,"公司的H5页面挨嵌入各种各样的广告，有时有，有时没有，这个很烦人，问过许多大咖，有几种说法和几种解决方法",-1),l=e(`<p><strong>1.DNS劫持 。</strong></p><p>HTML5页面被电信运营商进行DNS劫持植入广告，建议打电话给电信运营商。这招我试过，不管用，他们都在踢皮球，到底是运营商或代理商干的，，还是内部人干，很难追求到源头。</p><p><strong>2.HTTP劫持 。</strong></p><p>可能也有这个原因，建议使用HTTPS， HTTPS成本不算高， 一年几百块至几千块的，能有效拦截嵌入广告。 但不彻底， 照样有嵌入广告的情况，具体原因不详。</p><p><strong>3.第三方包植入广告。</strong></p><p>不排除第三方的包有植入广告的代码，但这个不好找，一个项目的npm包，可能1000多个~~..</p><p>难道没有更好的办法了吗? 有~~这个是别人那里扒过来的</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 反运营商劫持 S --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">html</span> <span class="token punctuation">{</span>

        <span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">if</span><span class="token punctuation">(</span> self <span class="token operator">==</span> top <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span> <span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        top<span class="token punctuation">.</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>location <span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 反运营商劫持 E --&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但实际运用的过程，不起作用，可能是奸商改了规则~~。</p><p>经过反复研究，那些嵌入的代码，的确规则时常变化的，~~但有一样东西是不变的，就是iframe，每段嵌入代码都会iframe</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
...
<span class="token comment">&lt;!-- 嵌入的广告代码 开始  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xx.com<span class="token punctuation">&quot;</span></span><span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 嵌入的广告代码 结束  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所以我的代码是这样写的。</p><p>css代码</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 抢先 隐藏 iframe */</span>
<span class="token selector">body iframe</span> <span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>js代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>		<span class="token keyword">var</span> del_times <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> deTimer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">function</span> <span class="token function">adGo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;iframe&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
				<span class="token keyword">var</span> bodyNode <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">tagName</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> iframeParent<span class="token punctuation">,</span> targetNode <span class="token operator">=</span> iframe<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>bodyNode<span class="token punctuation">.</span>tagName <span class="token operator">!=</span> <span class="token string">&#39;BODY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					bodyNode <span class="token operator">=</span> targetNode<span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>bodyNode<span class="token punctuation">.</span>tagName <span class="token operator">!=</span> <span class="token string">&#39;BODY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						iframeParent <span class="token operator">=</span> targetNode<span class="token punctuation">;</span>
						targetNode <span class="token operator">=</span> targetNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>iframeParent<span class="token punctuation">)</span> <span class="token comment">//如果iframe有父类</span>
					bodyNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframeParent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">else</span>
					bodyNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			del_times<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>del_times <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> window<span class="token punctuation">.</span><span class="token function">clearInterval</span><span class="token punctuation">(</span>deTimer<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//抢先 删除 嵌入广告</span>
		<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">adGo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		
		deTimer <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span>adGo<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把代码加到<code>&lt;body&gt;&lt;/body&gt;</code></p><p>经过一星期运行，效果棒棒的，妈妈再也不要担心我H5的弹出广告了。<br> github源代码在这里</p><div class="github-widget" data-repo="ssttm169/remove-h5-ads"></div>`,19);function i(u,k){return s(),a("div",null,[c,t(" more "),l])}const v=n(o,[["render",i],["__file","how-to-block-popup-ads-in-browser.html.vue"]]);export{v as default};
